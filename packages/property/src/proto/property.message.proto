syntax = 'proto3';

import "common.message.proto";
import "property.models.proto";



message QueryRelationshipRequest {
    QueryBuilder query_builder = 1;
    optional string search = 2;
    optional string property_a_id = 3;
    optional string property_b_id = 4;
    optional string type_id = 5;
    optional bool include_voided = 6;
    optional string start_date = 7;
    optional string end_date = 8;
    optional RequestContext context = 9;

}
message QueryRelationshipResponse {
    repeated Relationship data = 1;
    string metadata = 2; 
}
message CreateRelationshipRequest {
    QueryBuilder query_builder = 1;
    string property_a_id = 2;
    string property_b_id = 3;
    string start_date = 4;
    optional string end_date = 5;
    string type_id = 6;
    optional RequestContext context = 7;

}
message UpdateRelationshipRequest {
    QueryBuilder query_builder = 1;
    optional string property_a_id = 2;
    optional string property_b_id = 3;
    optional string start_date = 4;
    optional string end_date = 5;
    optional string type_id = 6;
    string id = 7;
    optional RequestContext context = 8;
}
message GetRelationshipRequest {
    QueryBuilder query_builder = 1;
    string id = 2;
    optional RequestContext context = 3;
}
message GetRelationshipResponse {
    Relationship data = 1;
    string metadata = 2; 
}
message DeleteRelationshipRequest {
    QueryBuilder query_builder = 1;
    string id = 2;
    optional bool purge = 3;
    optional RequestContext context = 4;
}
// Property status history
message QueryPropertyStatusHistoryRequest {
    QueryBuilder query_builder = 1;
    optional string search = 2;
    optional string property_id = 3;
    optional string changed_by = 4;
    optional string previous_status = 5;
    optional string new_status = 6;
    optional RequestContext context = 7;

}

message QueryPropertyStatusHistoryResponse {
    repeated PropertyStatusHistory data = 1;
    string metadata = 2; 
}

message CreatePropertyStatusHistoryRequest {
    QueryBuilder query_builder = 1;
    string property_id = 2;
    optional string changed_by = 3;
    string reason = 4;
    string previous_status = 5;
    string new_status = 6;
    optional RequestContext context = 7;
}

message GetPropertyStatusHistoryRequest {
    QueryBuilder query_builder = 1;
    string id = 2;
    optional RequestContext context = 3;
}
message GetPropertyStatusHistoryResponse {
    PropertyStatusHistory data = 1;
    string metadata = 2; 
}
message DeletePropertyStatusHistoryRequest {
    QueryBuilder query_builder = 1;
    string id = 2;
    optional bool purge = 3;
    optional RequestContext context = 4;
}

// Property media
message QueryPropertyMediaRequest {
    QueryBuilder query_builder = 1;
    optional string search = 2;
    optional string property_id = 3;
    optional string type = 4;
    optional int32 size = 5;
    optional string mime_type = 6;
    optional bool include_voided = 7;
    optional RequestContext context = 8;
}
message QueryPropertyMediaResponse {
    repeated PropertyMedia data = 1;
    string metadata = 2; 
}

message CreatePropertyMediaRequest {
    QueryBuilder query_builder = 1;
    string property_id = 2;
    string type = 3;
    string url = 4;
    optional string title = 5;
    optional string description = 6;
    map<string, string> metadata = 7; // size ,memeType,id,e.t.c
    int32 order = 8;
    optional RequestContext context = 9;
}

message UpdatePropertyMediaRequest {
    QueryBuilder query_builder = 1;
    optional string property_id = 2;
    optional string type = 3;
    optional string url = 4;
    optional string title = 5;
    optional string description = 6;
    map<string, string> metadata = 7; 
    optional int32 order = 8;
    string id = 9;
    optional RequestContext context = 10;
}
message GetPropertyMediaRequest {
    QueryBuilder query_builder = 1;
    string id = 2;
    optional RequestContext context = 3;
}
message GetPropertyMediaResponse {
    PropertyMedia data = 1;
    string metadata = 2; 
}
message DeletePropertyMediaRequest {
    QueryBuilder query_builder = 1;
    string id = 2;
    optional bool purge = 3;
    optional RequestContext context = 4;
}
// Property attribute
message QueryPropertyAttributeRequest {
    QueryBuilder query_builder = 1;
    optional string search = 2;
    optional string property_id = 3;
    optional string attribute_id = 4;
    optional bool include_voided = 5;
    optional RequestContext context = 6;
}

message QueryPropertyAttributeResponse {
    repeated PropertyAttribute data = 1;
    string metadata = 2; 
}

message CreatePropertyAttributeRequest {
    QueryBuilder query_builder = 1;
    string property_id = 2;
    string attribute_id = 3;
    string value = 4;
    optional RequestContext context = 5;
}
message UpdatePropertyAttributeRequest {
    QueryBuilder query_builder = 1;
    optional string property_id = 2;
    optional string attribute_id = 3;
    optional string value = 4;
    string id = 5;
    optional RequestContext context = 6;
}
message GetPropertyAttributeRequest {
    QueryBuilder query_builder = 1;
    string id = 2;
    optional RequestContext context = 3;
}
message GetPropertyAttributeResponse {
    PropertyAttribute data = 1;
    string metadata = 2; 
}
message DeletePropertyAttributeRequest {
    QueryBuilder query_builder = 1;
    string id = 2;
    optional bool purge = 3;
    optional RequestContext context = 4;
}
// Property Amenity
message QueryPropertyAmenityRequest {
    QueryBuilder query_builder = 1;
    optional string property_id = 2;
    optional string amenity_id = 3;
    optional bool include_voided = 4;
    optional RequestContext context = 5;
}

message QueryPropertyAmenityResponse {
    repeated PropertyAmenity data = 1;
    string metadata = 2; 
}
message CreatePropertyAmenityRequest {
    QueryBuilder query_builder = 1;
    string property_id = 2;
    string amenity_id = 3;
    optional RequestContext context = 4;
}
message UpdatePropertyAmenityRequest {
    QueryBuilder query_builder = 1;
    optional string property_id = 2;
    optional string amenity_id = 3;
    string id = 4;
    optional RequestContext context = 5;
}
message GetPropertyAmenityRequest {
    QueryBuilder query_builder = 1;
    string id = 2;
    optional RequestContext context = 3;
}
message GetPropertyAmenityResponse {
    PropertyAmenity data = 1;
    string metadata = 2; 
}
message DeletePropertyAmenityRequest {
    QueryBuilder query_builder = 1;
    string id = 2;
    optional bool purge = 3;
    optional RequestContext context = 4;
}
// Property category
message QueryPropertyCategoryRequest {
    QueryBuilder query_builder = 1;
    optional string property_id = 2;
    optional string category_id = 3;
    optional bool include_voided = 4;
    optional RequestContext context = 5;
}
message QueryPropertyCategoryResponse {
    repeated PropertyCategory data = 1;
    string metadata = 2; 
}
message CreatePropertyCategoryRequest {
    QueryBuilder query_builder = 1;
    string property_id = 2;
    string category_id = 3;
    optional RequestContext context = 4;
}
message UpdatePropertyCategoryRequest {
    QueryBuilder query_builder = 1;
    optional string property_id = 2;
    optional string category_id = 3;
    string id = 4;
    optional RequestContext context = 5;
}
message GetPropertyCategoryRequest {
    QueryBuilder query_builder = 1;
    string id = 2;
    optional RequestContext context = 3;
}
message GetPropertyCategoryResponse {
    PropertyCategory data = 1;
    string metadata = 2; 
}
message DeletePropertyCategoryRequest {
    QueryBuilder query_builder = 1;
    string id = 2;
    optional bool purge = 3;
    optional RequestContext context = 4;
}
// Property
message QueryPropertyRequest {
    QueryBuilder query_builder = 1;
    optional string search = 2;
    optional bool include_voided = 4;
    optional string status = 5;
    optional string address = 6;
    optional bool is_virtual = 7;
    map<string, string> attributes = 8;
    repeated string amenities = 9;
    repeated string categories = 10;
    optional RequestContext context = 11;

}
message QueryPropertyResponse {
    repeated Property data = 1;
    string metadata = 2; 
}

message CreatePropertyNestedAttribute {
    string attributeId = 1;
    string value = 2;
}

message CreatePropertyNestedMedia {
    string type = 1;
    string url = 2;
    optional string title = 3;
    optional string description = 4;
    optional int32 order = 5;
    optional string metadata = 6; // JSON Stringified metadata
}
message CreatePropertyRequest {
    QueryBuilder query_builder = 1;
    string name = 2;
    string address_id = 3;
    optional string description = 4;
    optional string thumbnail = 5;
    bool is_virtual = 6;
    repeated CreatePropertyNestedAttribute attributes = 7; 
    repeated string amenity_ids = 8;
    repeated string category_ids = 9;
    optional RequestContext context = 10;
    repeated CreatePropertyNestedMedia media = 11; 
}
message UpdatePropertyRequest {
    QueryBuilder query_builder = 1;
    optional string name = 2;
    optional string address_id = 3;
    optional string description = 4;
    optional string thumbnail = 5;
    optional bool is_virtual = 6;
    string id = 7;
    optional RequestContext context = 8;
}
message GetPropertyRequest {
    QueryBuilder query_builder = 1;
    string id = 2;
    optional RequestContext context = 3;
}
message GetPropertyResponse {
    Property data = 1;
    string metadata = 2; 
}
message DeletePropertyRequest {
    QueryBuilder query_builder = 1;
    string id = 2;
    optional bool purge = 3;
    optional RequestContext context = 4;
}